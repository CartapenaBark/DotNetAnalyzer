<Project Sdk="Microsoft.NET.Sdk">

  <ItemGroup>
    <ProjectReference Include="..\DotNetAnalyzer.Core\DotNetAnalyzer.Core.csproj" />
  </ItemGroup>

  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <!-- ç›®æ ‡æ¡†æž¶ï¼šæ”¯æŒ .NET 8.0ã€9.0ã€10.0 -->
    <TargetFrameworks>net8.0;net9.0;net10.0</TargetFrameworks>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <!-- è‡ªåŠ¨å®šä¹‰æ¡ä»¶ç¼–è¯‘ç¬¦å· -->
    <DefineConstants>$(DefineConstants);$(TargetFramework.Replace('NET', 'NET').Replace('.', '_'))</DefineConstants>

    <!-- C# è¯­è¨€ç‰ˆæœ¬é…ç½® -->
    <LangVersion Condition="'$(TargetFramework)' == 'net8.0'">12.0</LangVersion>
    <LangVersion Condition="'$(TargetFramework)' == 'net9.0'">13.0</LangVersion>
    <LangVersion Condition="'$(TargetFramework)' == 'net10.0'">14.0</LangVersion>

    <!-- .NET Global Tool é…ç½® -->
    <PackAsTool>true</PackAsTool>
    <ToolCommandName>dotnet-analyzer</ToolCommandName>
    <PackageId>DotNetAnalyzer</PackageId>
    <Version>0.8.0</Version>
    <Authors>CartapenaBark</Authors>
    <Description>MCP server with 70 tools for .NET code analysis, refactoring, and code generation</Description>
    <PackageTags>mcp;roslyn;code-analysis;claude;dotnet</PackageTags>
    <PackageProjectUrl>https://github.com/CartapenaBark/DotNetAnalyzer</PackageProjectUrl>
    <RepositoryUrl>https://github.com/CartapenaBark/DotNetAnalyzer</RepositoryUrl>
    <RepositoryType>git</RepositoryType>
    <PackageLicenseExpression>MIT</PackageLicenseExpression>
    <PackageReadmeFile>README.md</PackageReadmeFile>
    <PackageReleaseNotes><![CDATA[
      v0.8.0 - Framework Expansion & Dependency Optimization

      ðŸŽ¯ MAJOR IMPROVEMENTS:
        â€¢ âœ¨ Added .NET 10.0 support (C# 14)
        â€¢ ðŸ“¦ Unified Roslyn to version 5.0.0 across all frameworks
        â€¢ ðŸ”§ Removed conditional PackageReference compilations
        â€¢ âš¡ Achieved 0 warnings, 0 errors build
        â€¢ âœ… All tests passing (171 tests on net9.0/net10.0, 190 on net8.0)

      ðŸ“Š FRAMEWORK SUPPORT:
        â€¢ .NET 8.0 (C# 12) - 190/190 tests passing âœ…
        â€¢ .NET 9.0 (C# 13) - 171/171 tests passing âœ…
        â€¢ .NET 10.0 (C# 14) - 171/171 tests passing âœ…
        â€¢ Dropped .NET Standard 2.0 (incompatible with modern Roslyn)

      ðŸ”§ DEPENDENCIES:
        â€¢ Roslyn: Unified to 5.0.0 (was: 4.14.0 on net8.0, 5.0.0 on net9.0)
        â€¢ Removed BenchmarkDotNet (unused, causing NU1608 warnings)
        â€¢ All NU1608 package version conflicts resolved

      ðŸ› BUG FIXES:
        â€¢ Fixed WorkspaceManager conditional compilation (NET8_0 â†’ all frameworks)
        â€¢ Fixed 23 test failures on .NET 10.0
        â€¢ Removed null reference warnings

      v0.7.0 - Complete Feature Implementation

      ðŸŽ‰ Major Release - All Planned Features Completed

      âœ¨ NEW MCP TOOLS (29 total):
        Phase 3 - Refactoring Tools (11):
        â€¢ field_encapsulator - Encapsulate fields as properties
        â€¢ interface_extractor - Extract interface from class
        â€¢ signature_changer - Modify method signatures
        â€¢ parameter_adder - Add parameters to methods
        â€¢ temporary_inliner - Inline temporary variables
        â€¢ as_remover - Remove unnecessary 'as' conversions
        â€¢ unnecessary_code_remover - Remove unreachable code
        â€¢ for_to_foreach_converter - Convert for to foreach
        â€¢ foreach_to_for_converter - Convert foreach to for
        â€¢ if_to_switch_converter - Convert if-else to switch
        â€¢ for_reverser - Reverse for loop direction

        Phase 4 - Code Generation (6):
        â€¢ generate_interface_impl - Generate interface implementations
        â€¢ generate_constructor - Generate constructors from fields
        â€¢ generate_property - Generate properties
        â€¢ remove_unused_usings - Remove unused using directives
        â€¢ sort_usings - Sort using statements
        â€¢ add_missing_imports - Add missing imports

        Phase 5 - Advanced Features (8):
        â€¢ get_caller_info - Analyze method callers
        â€¢ get_callee_info - Analyze methods called by target
        â€¢ get_call_graph - Generate complete call graphs
        â€¢ compare_syntax_trees - Compare syntax trees
        â€¢ get_code_diff - Generate code differences
        â€¢ diagnostic_fixer - Fix compiler diagnostics
        â€¢ quick_fix_provider - Provide quick fixes
        â€¢ accessibility_fixer - Fix accessibility issues

      ðŸ“Š STATISTICS:
        â€¢ MCP Tools: 41 â†’ 70 (+29)
        â€¢ Test Pass Rate: 100% (190/190)
        â€¢ Compilation: Zero warnings, zero errors
        â€¢ All Phases: 100% Complete

      ðŸ”§ FIXES:
        â€¢ Fixed 56 compilation errors
        â€¢ Fixed 157 coding standard issues
        â€¢ Fixed macOS CI test race conditions

      æŠ€æœ¯ç»†èŠ‚ï¼š
        â€¢ 5,400+ lines of new code
        â€¢ å®Œæ•´çš„ä¸­æ–‡å’Œè‹±æ–‡æ–‡æ¡£
        â€¢ è·¨å¹³å°å…¼å®¹æ€§éªŒè¯

      v0.6.1 - CI/CD Optimization & Multi-Platform Support

      CI/CD ä¼˜åŒ–ï¼š
      - âœ¨ å¤šå¹³å°æž„å»ºæ”¯æŒ - Ubuntuã€Windowsã€macOS å¹¶è¡Œæµ‹è¯•
      - âœ¨ NuGet åŒ…ç¼“å­˜ - ä½¿ç”¨ actions/cache@v4 åŠ é€Ÿä¾èµ–è¿˜åŽŸ
      - ðŸš€ æ™ºèƒ½ç¼“å­˜æ¢å¤ - åŸºäºŽé¡¹ç›®æ–‡ä»¶å“ˆå¸Œï¼Œæ”¯æŒéƒ¨åˆ†åŒ¹é…
      - ðŸ“ˆ CI æ€§èƒ½æµ‹è¯•é˜ˆå€¼ä¼˜åŒ– - é€‚åº” GitHub Actions çŽ¯å¢ƒ
    ]]></PackageReleaseNotes>

    <!-- å…¬å¸å’Œäº§å“ä¿¡æ¯ -->
    <Company>CartapenaBark</Company>
    <Product>DotNetAnalyzer - MCP Code Analysis Server</Product>
    <Copyright>Copyright (c) 2026 CartapenaBark</Copyright>
    <!-- ç¦ç”¨è‡ªåŠ¨ç”Ÿæˆçš„ AssemblyInfo -->
    <GenerateAssemblyInfo>false</GenerateAssemblyInfo>
  </PropertyGroup>

  <ItemGroup>
    <!-- Microsoft.Extensions.* åŒ… - ç»Ÿä¸€ç‰ˆæœ¬ -->
    <PackageReference Include="Microsoft.Extensions.Hosting" Version="9.0.0" />
    <PackageReference Include="Microsoft.Extensions.Options.ConfigurationExtensions" Version="10.0.2" />
    <PackageReference Include="Microsoft.Extensions.Logging.Console" Version="9.0.0" />
  </ItemGroup>

  <!-- åŒ…å«é¡¹ç›®æ–‡ä»¶åˆ° NuGet åŒ… -->
  <ItemGroup>
    <!-- appsettings.json é…ç½®æ–‡ä»¶ -->
    <None Include="appsettings.json" CopyToOutputDirectory="PreserveNewest" />
    <None Include="appsettings.Development.json" CopyToOutputDirectory="PreserveNewest" />
  </ItemGroup>

  <ItemGroup>
    <!-- README.md æ–‡ä»¶ -->
    <None Include="..\..\README.md" Pack="true" PackagePath="\" Visible="false" />

    <!-- LICENSE æ–‡ä»¶ -->
    <None Include="..\..\LICENSE" Pack="true" PackagePath="\" Visible="false" />

    <!-- å›¾æ ‡ï¼ˆå¯é€‰ï¼‰ -->
    <!-- <None Include="icon.png" Pack="true" PackagePath="\" Visible="false" /> -->
  </ItemGroup>

</Project>
